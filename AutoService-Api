local HttpService = game:GetService("HttpService")
local Request = (syn and syn.request) or request or (http and http.request) or http_request
local username = game.Players.LocalPlayer.Name

local globalFunc = false

local function checkForError()
    game.CoreGui.RobloxPromptGui.promptOverlay.ChildAdded:Connect(function(v)
        if v.Name == "ErrorPrompt" then
            pcall(function()
                repeat wait(0.5) until game.CoreGui.RobloxPromptGui.promptOverlay.ErrorPrompt.MessageArea.ErrorFrame:FindFirstChild("ErrorMessage")
                
                local errorMessage = game.CoreGui.RobloxPromptGui.promptOverlay.ErrorPrompt.MessageArea.ErrorFrame.ErrorMessage.Text
                local errorCode = tonumber(errorMessage:split("\n")[2]:match("%d+"))

                if errorCode ~= 772 and errorCode ~= 773 then
                    globalFunc = true
                end
            end)
        end
    end)
    return globalFunc
end

local function updateStatus()
    local url = "http://localhost:1444/"
    local username = game.Players.LocalPlayer.Name
    local data = "username=" .. username

    local requestData = {
        Url = url,
        Method = "POST",
        Headers = {
            ["Content-Type"] = "application/x-www-form-urlencoded"
        },
        Body = data
    }

    local success, response = pcall(function()
        return Request(requestData)
    end)

    if success and response.StatusCode == 200 then
        print("Status updated for user: " .. username)
    else
        warn("Failed to update status: " .. (response and response.StatusCode or "Request failed"))
    end
end

while true do
    globalFunc = checkForError()
    print("Error found:", globalFunc)
    if not globalFunc then
        updateStatus()
    end

    wait(20)
end
